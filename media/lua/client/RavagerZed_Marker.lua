--[[██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                        				 Custom  PZ  Mod  Developer  for  Hire													  |
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                       	Portfolio:  https://steamcommunity.com/id/glytch3r/myworkshopfiles/							          |
|                       		                                    														 	  |
|                       	Discord:     glytch3r															      |
|                       		                                    														 	  |
|                       	Support:    https://ko-fi.com/glytch3r														    	  |
|_______________________________________________________________________________________________________________________________-]]
--[[_____________________________________________________________________________________________________________________________
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████--]]

require "lua_timers"
RavagerZed = RavagerZed or {}

RavagerZed.col = ColorInfo.new(0.38, 0.86, 0.78, 1);
RavagerZed.marker = nil
RavagerZed.color = { r = 1, g = 1, b = 1, a = 1 }

-----------------------            ---------------------------
function RavagerZed.tempMark(sq)
    if not sq then return end
    RavagerZed.addMark(sq)
    timer:Simple(30, function()
        RavagerZed.delMark()
    end)
end
function RavagerZed.getRandCol()
    return ZombRand(0, 101) /100
end



function RavagerZed.moveMark(sq)
    sq = sq or  getPlayer():getSquare()
    if RavagerZed.marker ~= nil then
        local x, y, z = round(sq:getX()),  round(sq:getY()),  sq:getZ()
        RavagerZed.marker:setPos(x, y, z)
    end
end
function RavagerZed.setMarkSize(size)
    size = size or 1
    if RavagerZed.marker ~= nil then
        RavagerZed.marker:setSize(size)
    end
end

function RavagerZed.getMarkSize()
    if RavagerZed.marker then
        return RavagerZed.marker:getSize()
    end
    return nil
end
-----------------------            ---------------------------
function RavagerZed.addMark(sq)
    local pl = getPlayer()
    sq = sq or pl:getSquare();
    if RavagerZed.marker ~= nil then
        RavagerZed.delMark()
    end
    if sq then
        if RavagerZed.marker == nil then
            RavagerZed.randCol = { r = RavagerZed.getRandCol(), g = RavagerZed.getRandCol(), b = RavagerZed.getRandCol(), a = 1 }
            RavagerZed.marker = getWorldMarkers():addGridSquareMarker("RavagerZedNest_Marker", "RavagerZedNest_Marker",  sq, RavagerZed.randCol.r, RavagerZed.randCol.g, RavagerZed.randCol.b,  true,  ZombRand(2,4))
            --RavagerZed.marker = getWorldMarkers():addPlayerHomingPoint(pl, sq:getX(), sq:getY(), "RavagerZed", RavagerZed.color.r, RavagerZed.color.g, RavagerZed.color.b, RavagerZed.color.a, true, 60);
        end
    end
end

function RavagerZed.delMark()
    if RavagerZed.marker  ~= nil then
        RavagerZed.marker:remove()
        RavagerZed.marker = nil
    end
end
-----------------------            ---------------------------
--[[ local toClip=tostring(); Clipboard.setClipboard(toClip); print(toClip)
result = ""
result =  tostring(result)..' '..tostring(var)..'\n'
Clipboard.setClipboard(tostring(RavagerZed.marker))
; print(toClip)

print(RavagerZed.marker)
 ]]
function RavagerZed.delayRemoveHL(pl, obj, sq)
    function RavagerZed.doDelayRemoveHL()
        if RavagerZed.checkDist(pl, sq) then
            print("doDelayRemoveHL")
            RavagerZed.setHL(obj, false)
            Events.OnTick.Remove(RavagerZed.doDelayRemoveHL)
        end
    end
    Events.OnTick.Add(RavagerZed.doDelayRemoveHL)
end

function RavagerZed.setHL(obj, bool)
    local pl = getPlayer()
    if not obj then return end
    local col = RavagerZed.col
    obj:setHighlightColor(col);
    obj:setOutlineHighlightCol(col);
    local sq = obj:getSquare()
    if bool then
        RavagerZed.delayRemoveHL(pl, obj, sq)
    end
    obj:setOutlineThickness(0.6);

    obj:setBlink(bool);
    obj:setOutlineHlBlink(bool);
    obj:setOutlineHighlight(bool);
    obj:setHighlighted(bool);
end